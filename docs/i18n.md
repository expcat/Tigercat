# 国际化 (i18n)

Tigercat UI 组件库支持国际化配置，允许你自定义组件中显示的文本。

## 概述

### 支持 i18n 的组件

| 组件       | 支持程度 | 主要文本                           |
| ---------- | -------- | ---------------------------------- |
| Pagination | ✅ 完整  | 页码、跳转、每页条数等             |
| DatePicker | ✅ 完整  | 月份、星期、占位符等               |
| TimePicker | ✅ 完整  | 时/分/秒标签、占位符等             |
| Modal      | ✅ 部分  | 确定/取消按钮、关闭按钮 aria-label |
| Drawer     | ✅ 部分  | 关闭按钮 aria-label                |
| Upload     | ✅ 完整  | 拖拽提示、文件状态、按钮文本等     |

### 配置方式

所有支持 i18n 的组件都接受 `locale` prop，类型为 `Partial<TigerLocale>`。

```typescript
import type { TigerLocale } from '@expcat/tigercat-core'
```

---

## Pagination 国际化

### 可配置文本

```typescript
interface TigerLocalePagination {
  /** 总数文本模板，支持 {total}, {start}, {end} 占位符 */
  totalText?: string
  /** 每页条数文本 */
  itemsPerPageText?: string
  /** 快速跳转标签 */
  jumpToText?: string
  /** "页" 文本 */
  pageText?: string
  /** 上一页按钮 aria-label */
  prevPageAriaLabel?: string
  /** 下一页按钮 aria-label */
  nextPageAriaLabel?: string
  /** 页码按钮 aria-label 模板，支持 {page} 占位符 */
  pageAriaLabel?: string
}
```

### 默认值（英文）

```typescript
const DEFAULT_PAGINATION_LABELS = {
  totalText: 'Total {total} items',
  itemsPerPageText: '/ page',
  jumpToText: 'Go to',
  pageText: 'page',
  prevPageAriaLabel: 'Previous page',
  nextPageAriaLabel: 'Next page',
  pageAriaLabel: 'Page {page}'
}
```

### 中文简体预设

```typescript
import { ZH_CN_PAGINATION_LABELS } from '@expcat/tigercat-core'

// 预设值
const ZH_CN_PAGINATION_LABELS = {
  totalText: '共 {total} 条',
  itemsPerPageText: '条/页',
  jumpToText: '跳至',
  pageText: '页',
  prevPageAriaLabel: '上一页',
  nextPageAriaLabel: '下一页',
  pageAriaLabel: '第 {page} 页'
}
```

### 使用示例

#### Vue

```vue
<template>
  <Pagination :total="100" :locale="zhLocale" />
</template>

<script setup lang="ts">
import { Pagination } from '@expcat/tigercat-vue'
import { ZH_CN_PAGINATION_LABELS } from '@expcat/tigercat-core'

const zhLocale = {
  pagination: ZH_CN_PAGINATION_LABELS
}
</script>
```

#### React

```tsx
import { Pagination } from '@expcat/tigercat-react'
import { ZH_CN_PAGINATION_LABELS } from '@expcat/tigercat-core'

function App() {
  const zhLocale = {
    pagination: ZH_CN_PAGINATION_LABELS
  }

  return <Pagination total={100} locale={zhLocale} />
}
```

### 自定义文本

```tsx
const customLocale = {
  pagination: {
    totalText: '共 {total} 项',
    itemsPerPageText: '项/页',
    jumpToText: '前往',
    pageText: '页',
    prevPageAriaLabel: '上一页',
    nextPageAriaLabel: '下一页',
    pageAriaLabel: '第 {page} 页'
  }
}

<Pagination total={100} locale={customLocale} />
```

---

## DatePicker 国际化

### 可配置文本

DatePicker 使用 `DatePickerLocale` 类型：

```typescript
interface DatePickerLocale {
  /** 月份名称 (1-12月) */
  months?: string[]
  /** 月份简写 */
  monthsShort?: string[]
  /** 星期名称 (周日-周六) */
  weekdays?: string[]
  /** 星期简写 */
  weekdaysShort?: string[]
  /** 星期最短形式 */
  weekdaysMin?: string[]
  /** 输入框占位符 */
  placeholder?: string
  /** 范围选择起始占位符 */
  startPlaceholder?: string
  /** 范围选择结束占位符 */
  endPlaceholder?: string
  /** 今天按钮文本 */
  today?: string
  /** 清除按钮文本 */
  clear?: string
}
```

### 默认值（英文）

```typescript
const DEFAULT_DATEPICKER_LOCALE = {
  months: [
    'January',
    'February',
    'March',
    'April',
    'May',
    'June',
    'July',
    'August',
    'September',
    'October',
    'November',
    'December'
  ],
  monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
  weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
  weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
  weekdaysMin: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
  placeholder: 'Select date',
  startPlaceholder: 'Start date',
  endPlaceholder: 'End date',
  today: 'Today',
  clear: 'Clear'
}
```

### 中文简体配置

```typescript
const ZH_CN_DATEPICKER_LOCALE = {
  months: [
    '一月',
    '二月',
    '三月',
    '四月',
    '五月',
    '六月',
    '七月',
    '八月',
    '九月',
    '十月',
    '十一月',
    '十二月'
  ],
  monthsShort: [
    '1月',
    '2月',
    '3月',
    '4月',
    '5月',
    '6月',
    '7月',
    '8月',
    '9月',
    '10月',
    '11月',
    '12月'
  ],
  weekdays: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],
  weekdaysShort: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],
  weekdaysMin: ['日', '一', '二', '三', '四', '五', '六'],
  placeholder: '请选择日期',
  startPlaceholder: '开始日期',
  endPlaceholder: '结束日期',
  today: '今天',
  clear: '清除'
}
```

### 使用示例

#### Vue

```vue
<template>
  <DatePicker v-model="date" :locale="zhLocale" />
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { DatePicker } from '@expcat/tigercat-vue'

const date = ref<Date | null>(null)
const zhLocale = {
  months: [
    '一月',
    '二月',
    '三月',
    '四月',
    '五月',
    '六月',
    '七月',
    '八月',
    '九月',
    '十月',
    '十一月',
    '十二月'
  ],
  weekdaysMin: ['日', '一', '二', '三', '四', '五', '六'],
  placeholder: '请选择日期'
}
</script>
```

#### React

```tsx
import { useState } from 'react'
import { DatePicker } from '@expcat/tigercat-react'

function App() {
  const [date, setDate] = useState<Date | null>(null)

  const zhLocale = {
    months: [
      '一月',
      '二月',
      '三月',
      '四月',
      '五月',
      '六月',
      '七月',
      '八月',
      '九月',
      '十月',
      '十一月',
      '十二月'
    ],
    weekdaysMin: ['日', '一', '二', '三', '四', '五', '六'],
    placeholder: '请选择日期'
  }

  return <DatePicker value={date} onChange={setDate} locale={zhLocale} />
}
```

---

## TimePicker 国际化

### 可配置文本

```typescript
interface TimePickerLabels {
  /** 时标签 */
  hour?: string
  /** 分标签 */
  minute?: string
  /** 秒标签 */
  second?: string
  /** 占位符 */
  placeholder?: string
  /** 范围选择起始占位符 */
  startPlaceholder?: string
  /** 范围选择结束占位符 */
  endPlaceholder?: string
  /** 确定按钮文本 */
  ok?: string
  /** 现在按钮文本 */
  now?: string
}
```

### 默认值（英文）

```typescript
const DEFAULT_TIMEPICKER_LABELS = {
  hour: 'Hour',
  minute: 'Minute',
  second: 'Second',
  placeholder: 'Select time',
  startPlaceholder: 'Start time',
  endPlaceholder: 'End time',
  ok: 'OK',
  now: 'Now'
}
```

### 中文简体配置

```typescript
const ZH_CN_TIMEPICKER_LABELS = {
  hour: '时',
  minute: '分',
  second: '秒',
  placeholder: '请选择时间',
  startPlaceholder: '开始时间',
  endPlaceholder: '结束时间',
  ok: '确定',
  now: '此刻'
}
```

### 使用示例

#### Vue

```vue
<template>
  <TimePicker v-model="time" :labels="zhLabels" />
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { TimePicker } from '@expcat/tigercat-vue'

const time = ref<string>('')
const zhLabels = {
  hour: '时',
  minute: '分',
  second: '秒',
  placeholder: '请选择时间'
}
</script>
```

#### React

```tsx
import { useState } from 'react'
import { TimePicker } from '@expcat/tigercat-react'

function App() {
  const [time, setTime] = useState('')

  const zhLabels = {
    hour: '时',
    minute: '分',
    second: '秒',
    placeholder: '请选择时间'
  }

  return <TimePicker value={time} onChange={setTime} labels={zhLabels} />
}
```

---

## 全局配置

### 创建统一的 locale 对象

```typescript
import type { TigerLocale } from '@expcat/tigercat-core'
import { ZH_CN_PAGINATION_LABELS } from '@expcat/tigercat-core'

export const zhCN: Partial<TigerLocale> = {
  common: {
    okText: '确定',
    cancelText: '取消',
    closeText: '关闭',
    loadingText: '加载中...',
    emptyText: '暂无数据'
  },
  modal: {
    closeAriaLabel: '关闭对话框',
    okText: '确定',
    cancelText: '取消'
  },
  drawer: {
    closeAriaLabel: '关闭抽屉'
  },
  pagination: ZH_CN_PAGINATION_LABELS
}
```

### Vue 全局配置（通过 provide/inject）

```vue
<!-- App.vue -->
<template>
  <slot />
</template>

<script setup lang="ts">
import { provide } from 'vue'
import { zhCN } from './locales/zh-CN'

provide('tigerLocale', zhCN)
</script>
```

```vue
<!-- 子组件中使用 -->
<script setup lang="ts">
import { inject } from 'vue'
import type { TigerLocale } from '@expcat/tigercat-core'

const locale = inject<Partial<TigerLocale>>('tigerLocale', {})
</script>

<template>
  <Pagination :total="100" :locale="locale" />
</template>
```

### React 全局配置（通过 Context）

```tsx
// LocaleContext.tsx
import { createContext, useContext, ReactNode } from 'react'
import type { TigerLocale } from '@expcat/tigercat-core'

const LocaleContext = createContext<Partial<TigerLocale>>({})

export function LocaleProvider({
  locale,
  children
}: {
  locale: Partial<TigerLocale>
  children: ReactNode
}) {
  return <LocaleContext.Provider value={locale}>{children}</LocaleContext.Provider>
}

export function useTigerLocale() {
  return useContext(LocaleContext)
}
```

```tsx
// App.tsx
import { LocaleProvider } from './LocaleContext'
import { zhCN } from './locales/zh-CN'

function App() {
  return (
    <LocaleProvider locale={zhCN}>
      <MyComponent />
    </LocaleProvider>
  )
}

// MyComponent.tsx
import { useTigerLocale } from './LocaleContext'
import { Pagination } from '@expcat/tigercat-react'

function MyComponent() {
  const locale = useTigerLocale()
  return <Pagination total={100} locale={locale} />
}
```

---

## 工具函数

### getPaginationLabels

获取解析后的分页标签，自动合并默认值：

```typescript
import { getPaginationLabels } from '@expcat/tigercat-core'

const labels = getPaginationLabels({ pagination: { totalText: '共 {total} 条' } })
// labels.totalText === '共 {total} 条'
// labels.jumpToText === 'Go to' (使用默认值)
```

### formatPaginationTotal

格式化分页总数文本：

```typescript
import { formatPaginationTotal } from '@expcat/tigercat-core'

const text = formatPaginationTotal('共 {total} 条，显示 {start}-{end}', 100, [1, 10])
// '共 100 条，显示 1-10'
```

### formatPageAriaLabel

格式化页码按钮的 aria-label：

```typescript
import { formatPageAriaLabel } from '@expcat/tigercat-core'

const label = formatPageAriaLabel('第 {page} 页', 5)
// '第 5 页'
```

---

## 类型定义

完整的 `TigerLocale` 类型定义：

```typescript
export interface TigerLocaleCommon {
  okText?: string
  cancelText?: string
  closeText?: string
  loadingText?: string
  emptyText?: string
}

export interface TigerLocaleModal {
  closeAriaLabel?: string
  okText?: string
  cancelText?: string
}

export interface TigerLocaleDrawer {
  closeAriaLabel?: string
}

export interface TigerLocaleUpload {
  dragAreaAriaLabel?: string
  buttonAriaLabel?: string
  clickToUploadText?: string
  dragAndDropText?: string
  acceptInfoText?: string
  maxSizeInfoText?: string
  selectFileText?: string
  uploadedFilesAriaLabel?: string
  successAriaLabel?: string
  errorAriaLabel?: string
  uploadingAriaLabel?: string
  removeFileAriaLabel?: string
  previewFileAriaLabel?: string
}

export interface TigerLocalePagination {
  totalText?: string
  itemsPerPageText?: string
  jumpToText?: string
  pageText?: string
  prevPageAriaLabel?: string
  nextPageAriaLabel?: string
  pageAriaLabel?: string
}

export interface TigerLocale {
  common?: TigerLocaleCommon
  modal?: TigerLocaleModal
  drawer?: TigerLocaleDrawer
  upload?: TigerLocaleUpload
  pagination?: TigerLocalePagination
}
```
